{"version":3,"sources":["../src/getMapping.js"],"names":["getMapping","sourceMap","location","start","line","column","end","originalPositionFor","source","bias","LEAST_UPPER_BOUND","loc","skip"],"mappings":";;;;;;;oBAQwBA,U;;;AANxB;;;;;;AAMe,WAASA,UAAT,CAAoBC,SAApB,EAA+BC,QAA/B,EAAyC;AACvD;AACA,OAAIA,SAASC,KAAT,CAAeC,IAAf,GAAsB,CAAtB,IAA2BF,SAASC,KAAT,CAAeE,MAAf,GAAwB,CAAvD,EAA0D;AACzD,WAAO,IAAP;AACA;AACD;AACA,OAAIH,SAASI,GAAT,CAAaF,IAAb,GAAoB,CAApB,IAAyBF,SAASI,GAAT,CAAaD,MAAb,GAAsB,CAAnD,EAAsD;AACrD,WAAO,IAAP;AACA;;AAED,OAAMF,QAAQF,UAAUM,mBAAV,CAA8BL,SAASC,KAAvC,CAAd;AACA,OAAIG,MAAML,UAAUM,mBAAV,CAA8BL,SAASI,GAAvC,CAAV;;AAEA;AACA,OAAI,CAACH,KAAD,IAAU,CAACG,GAAf,EAAoB;AACnB,WAAO,IAAP;AACA;AACD,OAAI,CAACH,MAAMK,MAAP,IAAiB,CAACF,IAAIE,MAAtB,IAAgCL,MAAMK,MAAN,KAAiBF,IAAIE,MAAzD,EAAiE;AAChE,WAAO,IAAP;AACA;AACD;AACA,OAAIL,MAAMC,IAAN,KAAe,IAAf,IAAuBD,MAAME,MAAN,KAAiB,IAA5C,EAAkD;AACjD,WAAO,IAAP;AACA;AACD;AACA,OAAIC,IAAIF,IAAJ,KAAa,IAAb,IAAqBE,IAAID,MAAJ,KAAe,IAAxC,EAA8C;AAC7C,WAAO,IAAP;AACA;;AAED,OAAIF,MAAMC,IAAN,KAAeE,IAAIF,IAAnB,IAA2BD,MAAME,MAAN,KAAiBC,IAAID,MAApD,EAA4D;AAC3DC,UAAML,UAAUM,mBAAV,CAA8B;AACnCH,WAAMF,SAASI,GAAT,CAAaF,IADgB;AAEnCC,aAAQH,SAASI,GAAT,CAAaD,MAFc;AAGnCI,WAAM,iCAAkBC;AAHW,KAA9B,CAAN;AAKAJ,QAAID,MAAJ,IAAc,CAAd;AACA;;AAED,UAAO;AACNG,YAAQL,MAAMK,MADR;AAENG,SAAK;AACJR,YAAO;AACNC,YAAMD,MAAMC,IADN;AAENC,cAAQF,MAAME;AAFR,MADH;AAKJC,UAAK;AACJF,YAAME,IAAIF,IADN;AAEJC,cAAQC,IAAID;AAFR,MALD;AASJO,WAAMV,SAASU;AATX;AAFC,IAAP;AAcA","file":"getMapping.js","sourcesContent":["import { SourceMapConsumer } from '../utils/node!source-map';\r\n\r\n/**\r\n * A function that determines the original position for a given location\r\n * @param  {SourceMapConsumer} sourceMap        The source map\r\n * @param  {Object}            location         The original location Object\r\n * @return {Object}                             The remapped location Object\r\n */\r\nexport default function getMapping(sourceMap, location) {\r\n\t/* istanbul ignore if: edge case too hard to test for with babel malformation */\r\n\tif (location.start.line < 1 || location.start.column < 0) {\r\n\t\treturn null;\r\n\t}\r\n\t/* istanbul ignore if: edge case too hard to test for with babel malformation */\r\n\tif (location.end.line < 1 || location.end.column < 0) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst start = sourceMap.originalPositionFor(location.start);\r\n\tlet end = sourceMap.originalPositionFor(location.end);\r\n\r\n\t/* istanbul ignore if: edge case too hard to test for */\r\n\tif (!start || !end) {\r\n\t\treturn null;\r\n\t}\r\n\tif (!start.source || !end.source || start.source !== end.source) {\r\n\t\treturn null;\r\n\t}\r\n\t/* istanbul ignore if: edge case too hard to test for */\r\n\tif (start.line === null || start.column === null) {\r\n\t\treturn null;\r\n\t}\r\n\t/* istanbul ignore if: edge case too hard to test for */\r\n\tif (end.line === null || end.column === null) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif (start.line === end.line && start.column === end.column) {\r\n\t\tend = sourceMap.originalPositionFor({\r\n\t\t\tline: location.end.line,\r\n\t\t\tcolumn: location.end.column,\r\n\t\t\tbias: SourceMapConsumer.LEAST_UPPER_BOUND,\r\n\t\t});\r\n\t\tend.column -= 1;\r\n\t}\r\n\r\n\treturn {\r\n\t\tsource: start.source,\r\n\t\tloc: {\r\n\t\t\tstart: {\r\n\t\t\t\tline: start.line,\r\n\t\t\t\tcolumn: start.column,\r\n\t\t\t},\r\n\t\t\tend: {\r\n\t\t\t\tline: end.line,\r\n\t\t\t\tcolumn: end.column,\r\n\t\t\t},\r\n\t\t\tskip: location.skip,\r\n\t\t},\r\n\t};\r\n}\r\n"]}