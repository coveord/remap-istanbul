{"version":3,"sources":["../src/loadCoverage.js"],"names":["loadCoverage","sources","options","warn","console","readJSON","filePath","existsSync","Error","JSON","parse","readFileSync","length","SyntaxError","collector","forEach","add","getFinalCoverage"],"mappings":";;;;;;;oBAWwBA,Y;;;;;;;;;;AATxB;;;;;;;;;AASe,WAASA,YAAT,CAAsBC,OAAtB,EAA6C;AAAA,OAAdC,OAAc,uEAAJ,EAAI;;AAC3D,OAAMC,OAAOD,QAAQC,IAAR,IAAgBC,QAAQD,IAArC;;AAEA,OAAME,WAAWH,QAAQG,QAAR,IACb,UAAUC,QAAV,EAAoB;AACtB,QAAI,CAAC,aAAGC,UAAH,CAAcD,QAAd,CAAL,EAA8B;AAC7BH,UAAK,IAAIK,KAAJ,yBAAgCF,QAAhC,OAAL;AACA,YAAO,EAAP;AACA;AACD,WAAOG,KAAKC,KAAL,CAAW,aAAGC,YAAH,CAAgBL,QAAhB,CAAX,CAAP;AACA,IAPF;;AASA,OAAI,OAAOL,OAAP,KAAmB,QAAvB,EAAiC;AAChCA,cAAU,CAACA,OAAD,CAAV;AACA;AACD,OAAI,CAACA,QAAQW,MAAb,EAAqB;AACpBT,SAAK,IAAIU,WAAJ,CAAgB,6BAAhB,CAAL;AACA;AACD,OAAMC,YAAY,6BAAlB;AACAb,WAAQc,OAAR,CAAgB,UAACT,QAAD,EAAc;AAC7BQ,cAAUE,GAAV,CAAcX,SAASC,QAAT,CAAd;AACA,IAFD;;AAIA,UAAOQ,UAAUG,gBAAV,EAAP;AACA","file":"loadCoverage.js","sourcesContent":["import { Collector } from '../utils/node!istanbul';\r\nimport fs from 'fs';\r\n/**\r\n * Takes sources of coverage information and adds them to a collector which then can be subsequently\r\n * remapped.\r\n * @param  {Array|string}           sources  The source(s) of the JSON coverage information\r\n * @param  {Object}                 options? A hash of options that can be set:\r\n *                                               readJSON?: A function that can read and parse a JSON file\r\n *                                               warn?: A function that logs warning messages\r\n * @return {Object}                          The loaded coverage object\r\n */\r\nexport default function loadCoverage(sources, options = {}) {\r\n\tconst warn = options.warn || console.warn;\r\n\r\n\tconst readJSON = options.readJSON\r\n\t\t|| function (filePath) {\r\n\t\t\tif (!fs.existsSync(filePath)) {\r\n\t\t\t\twarn(new Error(`Cannot find file: \"${filePath}\"`));\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t\treturn JSON.parse(fs.readFileSync(filePath));\r\n\t\t};\r\n\r\n\tif (typeof sources === 'string') {\r\n\t\tsources = [sources];\r\n\t}\r\n\tif (!sources.length) {\r\n\t\twarn(new SyntaxError('No coverage files supplied!'));\r\n\t}\r\n\tconst collector = new Collector();\r\n\tsources.forEach((filePath) => {\r\n\t\tcollector.add(readJSON(filePath));\r\n\t});\r\n\r\n\treturn collector.getFinalCoverage();\r\n};\r\n"]}