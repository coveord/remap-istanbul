{"version":3,"sources":["../src/main.js"],"names":["sources","reports","reportOptions","sourceStore","collector","Object","keys","map","length","undefined","Promise","all","reportType","loadCoverage","remap","writeReport"],"mappings":";;;;;;;;;oBAqBe,UAAUA,OAAV,EAAmBC,OAAnB,EAA4BC,aAA5B,EAA2C;AACzD,OAAIC,cAAc,sBAAlB;AACA,OAAMC,YAAY,qBAAO,4BAAcJ,OAAd,CAAP,EAA+B;AAChDA,aAASG;AADuC,IAA/B,CAAlB;;AAIA,OAAI,CAACE,OAAOC,IAAP,CAAYH,YAAYI,GAAxB,EAA6BC,MAAlC,EAA0C;AACzCL,kBAAcM,SAAd;AACA;;AAGD,UAAOC,QAAQC,GAAR,CACNN,OAAOC,IAAP,CAAYL,OAAZ,EACEM,GADF,CACM;AAAA,WACJ,2BAAaH,SAAb,EAAwBQ,UAAxB,EAAoCV,iBAAiB,EAArD,EAAyDD,QAAQW,UAAR,CAAzD,EAA8ET,WAA9E,CADI;AAAA,IADN,CADM,CAAP;AAMA,G;;;;;;;;;;;;;;;;AAtCD;AACA;AAMO,MAAMU,4DAAN;AACA,MAAMC,uCAAN;AACA,MAAMC,yDAAN;;AAEP;;;;;;;;;;AA2BC","file":"main.js","sourcesContent":["/* jshint node:true */\r\n/* global Promise */\r\nimport _loadCoverage from './loadCoverage';\r\nimport _remap from './remap';\r\nimport _writeReport from './writeReport';\r\nimport MemoryStore from '../utils/node!istanbul/lib/store/memory';\r\n\r\nexport const loadCoverage = _loadCoverage;\r\nexport const remap = _remap;\r\nexport const writeReport = _writeReport;\r\n\r\n/**\r\n * The basic API for utilising remap-istanbul\r\n * @param  {Array|string} sources The sources that could be consumed and remapped.\r\n *                                For muliple sources to be combined together, provide\r\n *                                an array of strings.\r\n * @param  {Object} reports An object where each key is the report type required and the value\r\n *                          is the destination for the report.\r\n * @param  {Object} reportOptions? An object containing the report options.\r\n * @return {Promise}         A promise that will resolve when all the reports are written.\r\n */\r\nexport default function (sources, reports, reportOptions) {\r\n\tlet sourceStore = new MemoryStore();\r\n\tconst collector = _remap(_loadCoverage(sources), {\r\n\t\tsources: sourceStore,\r\n\t});\r\n\r\n\tif (!Object.keys(sourceStore.map).length) {\r\n\t\tsourceStore = undefined;\r\n\t}\r\n\r\n\r\n\treturn Promise.all(\r\n\t\tObject.keys(reports)\r\n\t\t\t.map(reportType =>\r\n\t\t\t\t_writeReport(collector, reportType, reportOptions || {}, reports[reportType], sourceStore)\r\n\t\t\t)\r\n\t);\r\n};\r\n"]}